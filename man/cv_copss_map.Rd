% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cv_copss.R
\name{cv_copss_map}
\alias{cv_copss_map}
\title{Order-preserved 2-fold CV for getModel (MAP-only)}
\usage{
cv_copss_map(
  y,
  taus,
  H,
  X = NULL,
  w,
  grid_lambda_nc,
  T_rel = 0.1,
  prior_gamma = "group_lasso",
  map_iter = 2000,
  seed = 123,
  verbose = TRUE
)
}
\arguments{
\item{y}{Numeric vector of responses.}

\item{taus}{Numeric vector of quantile levels.}

\item{H, X}{Design matrices (already aligned with y).}

\item{w}{Integer; passed to \code{getModel}.}

\item{grid_lambda_nc}{Numeric vector of candidate \code{lambda_nc} (non-crossing penalty).}

\item{T_rel}{Smoothing temperature (default 0.1).}

\item{prior_gamma}{Prior type for gamma (default "group_lasso").}

\item{map_iter}{Maximum iterations for MAP optimization.}

\item{seed}{Random seed.}

\item{verbose}{Print progress messages.}
}
\value{
A data.frame of grid values and CV losses (lower is better), sorted by val_loss.
}
\description{
Implements the COPSS-style split (odds vs evens) and evaluates a grid of
\code{lambda_nc} using MAP fits from \code{getModel}.
Scoring uses the average pinball (check) loss across all taus on the held-out fold.
IQ shrinkage uses its own penalty lambda_iq2 (adaptive or fixed).
}
\examples{
\dontrun{
set.seed(123)
n <- 200
y <- rnorm(n)
y[150:200] <- y[150:200] + 2
H <- getSustainedShift(n, l = 20, w = 30)
taus <- c(0.1, 0.5, 0.9)

cv_result <- cv_copss_map(
  y = y, taus = taus, H = H, X = NULL, w = 30,
  grid_lambda_nc = c(5, 10, 20)
)
print(cv_result)
}

}
